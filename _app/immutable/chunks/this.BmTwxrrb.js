import{i as R,S as m,a as i,o as D,b as O,d as j,s as y,c as x,e as c,g as h,f as p,h as k,u as w,j as q,k as K,r as S,q as A}from"./runtime.qejZWuLg.js";import{U as u}from"./disclose-version.h7BwwYBF.js";function v(t,s=null,n){if(typeof t=="object"&&t!=null&&!R(t)&&!(m in t)){if(i in t){const r=t[i];if(r.t===t||r.p===t)return r.p}const e=q(t);if(e===D||e===O){const r=new Proxy(t,E);return j(t,i,{value:{s:new Map,v:y(0),a:x(t),p:r,t},writable:!0,enumerable:!1}),r}}return t}function b(t,s=1){c(t,t.v+s)}const E={defineProperty(t,s,n){if(n.value){const e=t[i],r=e.s.get(s);r!==void 0&&c(r,v(n.value,e))}return Reflect.defineProperty(t,s,n)},deleteProperty(t,s){const n=t[i],e=n.s.get(s),r=n.a,o=delete t[s];if(r&&o){const a=n.s.get("length"),g=t.length-1;a!==void 0&&a.v!==g&&c(a,g)}return e!==void 0&&c(e,u),o&&b(n.v),o},get(t,s,n){var o;if(s===i)return Reflect.get(t,i);const e=t[i];let r=e.s.get(s);if(r===void 0&&(!(s in t)||(o=h(t,s))!=null&&o.writable)&&(r=y(v(t[s],e)),e.s.set(s,r)),r!==void 0){const a=p(r);return a===u?void 0:a}return Reflect.get(t,s,n)},getOwnPropertyDescriptor(t,s){const n=Reflect.getOwnPropertyDescriptor(t,s);if(n&&"value"in n){const e=t[i].s.get(s);e&&(n.value=p(e))}return n},has(t,s){var o;if(s===i)return!0;const n=t[i],e=Reflect.has(t,s);let r=n.s.get(s);return(r!==void 0||k!==null&&(!e||(o=h(t,s))!=null&&o.writable))&&(r===void 0&&(r=y(e?v(t[s],n):u),n.s.set(s,r)),p(r)===u)?!1:e},set(t,s,n,e){const r=t[i];let o=r.s.get(s);o===void 0&&(w(()=>e[s]),o=r.s.get(s)),o!==void 0&&c(o,v(n,r));const a=r.a,g=!(s in t);if(a&&s==="length")for(let l=n;l<t.length;l+=1){const f=r.s.get(l+"");f!==void 0&&c(f,u)}var d=Reflect.getOwnPropertyDescriptor(t,s);if(d!=null&&d.set?d.set.call(e,n):t[s]=n,g){if(a){const l=r.s.get("length"),f=t.length;l!==void 0&&l.v!==f&&c(l,f)}b(r.v)}return!0},ownKeys(t){const s=t[i];return p(s.v),Reflect.ownKeys(t)}};function P(t,s){var e;var n=t&&((e=t[i])==null?void 0:e.t);return t===s||n===s}function I(t={},s,n,e){return K(()=>{var r,o;return S(()=>{r=o,o=[],w(()=>{t!==n(...o)&&(s(t,...o),r&&P(n(...r),t)&&s(null,...r))})}),()=>{A(()=>{o&&P(n(...o),t)&&s(null,...o)})}}),t}export{I as b,v as p};
